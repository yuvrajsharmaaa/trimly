(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[210],{29580:function(e,t,r){Promise.resolve().then(r.bind(r,51454))},51454:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return G}});var i=r(57437),n=r(2265),l=r(71733),o=r(79806),a=r(91326),s=r(80511),c=r(64593),d=r(40468),h=r(16014),u=r(58433),x=r(42606),f=r(27398),m=r(40753),g=r(10365),p=r(16177),y=r(42011),j=r(38327),b=r(13054),Z=r(12270),v=r(70270),k=r(94696),w=r(35349),S=r(63386);let C=(0,n.memo)(e=>{let{title:t,value:r,icon:n,trend:l,color:o="#3b82f6",delay:c=0}=e,d=void 0!==l&&l>=0;return(0,i.jsx)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:c},whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,i.jsx)(v.Z,{sx:{height:"100%",position:"relative",overflow:"visible","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:4,background:"linear-gradient(90deg, ".concat(o,", ").concat(o,"99)"),borderRadius:"12px 12px 0 0"}},children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",children:[(0,i.jsxs)(a.Z,{flex:1,children:[(0,i.jsx)(s.Z,{variant:"body2",color:"text.secondary",gutterBottom:!0,sx:{fontWeight:500,textTransform:"uppercase",letterSpacing:.5},children:t}),(0,i.jsx)(s.Z,{variant:"h4",component:"div",sx:{fontWeight:700,my:1},children:r}),void 0!==l&&(0,i.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:.5,children:[d?(0,i.jsx)(p.Z,{sx:{fontSize:16,color:"success.main"}}):(0,i.jsx)(S.Z,{sx:{fontSize:16,color:"error.main"}}),(0,i.jsxs)(s.Z,{variant:"caption",sx:{color:d?"success.main":"error.main",fontWeight:600},children:[d?"+":"",l,"% from last month"]})]})]}),(0,i.jsx)(w.Z,{sx:{bgcolor:"".concat(o,"20"),color:o,width:56,height:56},children:n})]})})})})});C.displayName="StatsCard";var L=r(33346),U=r(22960),E=r(32804),I=r(60335),R=r(63742),_=r(33407),z=r(52326),W=r(55885),T=r(23753),M=r(77699),N=r(38719),P=r(5994);let D=(0,n.memo)(e=>{var t;let r,{links:l,onShowQR:o,onShowStats:c}=e,[d,h]=(0,n.useState)(""),[u,x]=(0,n.useState)(null),m=(0,U.Z)(),p=(0,E.Z)(m.breakpoints.down("sm")),y=(0,n.useCallback)(e=>{navigator.clipboard.writeText(e.shortUrl),x(e.id),setTimeout(()=>x(null),2e3)},[]),j=(0,n.useCallback)((t=e=>{h(e)},r=null,function(){for(var e=arguments.length,i=Array(e),n=0;n<e;n++)i[n]=arguments[n];r&&clearTimeout(r),r=setTimeout(()=>{r=null,t(...i)},300)}),[]),b=n.useMemo(()=>l.filter(e=>e.shortUrl.toLowerCase().includes(d.toLowerCase())||e.originalUrl.toLowerCase().includes(d.toLowerCase())),[l,d]),Z=(0,n.memo)(e=>{let{index:t,style:r}=e,n=b[t],l=u===n.id;return(0,i.jsx)(f.E.div,{style:r,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.05*t},children:(0,i.jsx)(v.Z,{sx:{mx:2,my:1,transition:"all 0.2s","&:hover":{transform:"translateX(4px)",boxShadow:4}},children:(0,i.jsx)(k.Z,{sx:{p:2},children:(0,i.jsxs)(a.Z,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",gap:2,children:[(0,i.jsxs)(a.Z,{flex:1,minWidth:0,children:[(0,i.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:1,mb:.5,children:[(0,i.jsx)(s.Z,{variant:"subtitle1",fontWeight:600,sx:{color:"primary.main",cursor:"pointer","&:hover":{textDecoration:"underline"}},onClick:()=>window.open(n.shortUrl,"_blank"),children:n.shortUrl}),(0,i.jsx)(I.Z,{size:"small",onClick:()=>window.open(n.shortUrl,"_blank"),sx:{p:.5},children:(0,i.jsx)(N.Z,{sx:{fontSize:16}})})]}),(0,i.jsx)(s.Z,{variant:"body2",color:"text.secondary",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n.originalUrl}),(0,i.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:1,mt:1,children:[(0,i.jsx)(R.Z,{label:"".concat(n.clicks," clicks"),size:"small",icon:(0,i.jsx)(g.Z,{}),color:"primary",variant:"outlined"}),(0,i.jsx)(s.Z,{variant:"caption",color:"text.secondary",children:new Date(n.createdAt).toLocaleDateString()})]})]}),(0,i.jsxs)(a.Z,{display:"flex",gap:.5,flexShrink:0,children:[(0,i.jsx)(I.Z,{size:"small",onClick:()=>y(n),color:l?"success":"default",sx:{bgcolor:l?"success.light":"action.hover"},children:l?(0,i.jsx)(P.Z,{}):(0,i.jsx)(W.Z,{})}),o&&(0,i.jsx)(I.Z,{size:"small",onClick:()=>o(n),sx:{bgcolor:"action.hover"},children:(0,i.jsx)(T.Z,{})}),c&&(0,i.jsx)(I.Z,{size:"small",onClick:()=>c(n),sx:{bgcolor:"action.hover"},children:(0,i.jsx)(g.Z,{})})]})]})})})})});return Z.displayName="LinkRow",(0,i.jsxs)(v.Z,{sx:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,i.jsxs)(k.Z,{sx:{p:3,pb:2},children:[(0,i.jsxs)(s.Z,{variant:"h6",fontWeight:600,gutterBottom:!0,children:["My Links (",b.length,")"]}),(0,i.jsx)(_.Z,{fullWidth:!0,placeholder:"Search links...",onChange:e=>j(e.target.value),InputProps:{startAdornment:(0,i.jsx)(z.Z,{position:"start",children:(0,i.jsx)(M.Z,{})})},sx:{mt:1}})]}),(0,i.jsx)(a.Z,{flex:1,minHeight:0,children:0===b.length?(0,i.jsx)(a.Z,{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",p:4,children:(0,i.jsx)(s.Z,{variant:"body2",color:"text.secondary",children:d?"No links found":"No links yet. Create your first short link!"})}):(0,i.jsx)(L.FixedSizeList,{height:p?400:600,itemCount:b.length,itemSize:140,width:"100%",children:Z})})]})});D.displayName="LinkList";var A=r(76548),q=r(80162);let B=(0,n.memo)(e=>{let{onSubmit:t}=e,[r,l]=(0,n.useState)(""),[o,c]=(0,n.useState)(""),[d,h]=(0,n.useState)(""),[u,x]=(0,n.useState)(!1),[g,p]=(0,n.useState)(!1),y=(0,n.useCallback)(async e=>{e.preventDefault(),h(""),c(""),x(!0);try{let e=await t(r);e.error?h(e.error):e.shortUrl&&(c(e.shortUrl),l(""))}catch(e){h("Failed to shorten URL. Please try again.")}finally{x(!1)}},[r,t]),j=(0,n.useCallback)(()=>{navigator.clipboard.writeText(o),p(!0),setTimeout(()=>p(!1),2e3)},[o]);return(0,i.jsx)(f.E.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,i.jsx)(v.Z,{children:(0,i.jsxs)(k.Z,{sx:{p:3},children:[(0,i.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:1,mb:2,children:[(0,i.jsx)(m.Z,{color:"primary"}),(0,i.jsx)(s.Z,{variant:"h6",fontWeight:600,children:"Shorten URL"})]}),(0,i.jsx)("form",{onSubmit:y,children:(0,i.jsxs)(a.Z,{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"},children:[(0,i.jsx)(_.Z,{fullWidth:!0,placeholder:"Enter your long URL here...",value:r,onChange:e=>l(e.target.value),disabled:u,required:!0,type:"url",sx:{flex:1}}),(0,i.jsx)(A.Z,{type:"submit",variant:"contained",disabled:u||!r,sx:{minWidth:120,height:56,fontWeight:600},children:u?"Shortening...":"Shorten"})]})}),d&&(0,i.jsx)(f.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:(0,i.jsx)(q.Z,{severity:"error",sx:{mt:2},children:d})}),o&&(0,i.jsx)(f.E.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},children:(0,i.jsx)(q.Z,{severity:"success",icon:(0,i.jsx)(P.Z,{}),sx:{mt:2},action:(0,i.jsx)(A.Z,{color:"inherit",size:"small",onClick:j,startIcon:g?(0,i.jsx)(P.Z,{}):(0,i.jsx)(W.Z,{}),children:g?"Copied!":"Copy"}),children:(0,i.jsx)(s.Z,{variant:"body2",fontWeight:500,children:o})})})]})})})});B.displayName="URLShortenerForm";var H=r(20656),O=r(39927);let F=(0,n.memo)(e=>{let{url:t,title:r="QR Code"}=e;return(0,i.jsx)(f.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:(0,i.jsx)(v.Z,{children:(0,i.jsxs)(k.Z,{sx:{p:3},children:[(0,i.jsx)(s.Z,{variant:"h6",fontWeight:600,gutterBottom:!0,children:r}),(0,i.jsx)(a.Z,{display:"flex",justifyContent:"center",alignItems:"center",p:3,bgcolor:"background.default",borderRadius:2,my:2,children:(0,i.jsx)(H.ZP,{id:"qr-code-svg",value:t,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 200 200"})}),(0,i.jsx)(A.Z,{fullWidth:!0,variant:"outlined",startIcon:(0,i.jsx)(O.Z,{}),onClick:()=>{let e=document.getElementById("qr-code-svg");if(!e)return;let t=new XMLSerializer().serializeToString(e),r=document.createElement("canvas"),i=r.getContext("2d"),n=new Image;n.onload=()=>{r.width=n.width,r.height=n.height,null==i||i.drawImage(n,0,0);let e=r.toDataURL("image/png"),t=document.createElement("a");t.download="qr-code.png",t.href=e,t.click()},n.src="data:image/svg+xml;base64,".concat(btoa(t))},children:"Download QR Code"})]})})})});F.displayName="QRCodeCard";var J=r(11853),X=r(51443),Q=r(76142),V=r(25130);let Y=(0,n.memo)(()=>{let{mode:e,toggleTheme:t}=(0,V.r)();return(0,i.jsx)(J.Z,{title:"Switch to ".concat("dark"===e?"light":"dark"," mode"),children:(0,i.jsx)(I.Z,{onClick:t,color:"inherit",sx:{ml:1,bgcolor:"background.paper","&:hover":{bgcolor:"action.hover"}},children:(0,i.jsx)(f.E.div,{initial:{rotate:0,scale:1},animate:{rotate:"dark"===e?0:180,scale:1},transition:{duration:.3},children:"dark"===e?(0,i.jsx)(Q.Z,{}):(0,i.jsx)(X.Z,{})})})})});function G(){var e,t;let[r,v]=(0,n.useState)(!1),[k,w]=(0,n.useState)(null),{loading:S,error:L,data:U,fn:E}=(0,j.Z)(b.Um),{loading:I,data:R,fn:_}=(0,j.Z)(Z.N3,null===(e=U||[])||void 0===e?void 0:e.map(e=>e.id));(0,n.useEffect)(()=>{E()},[E]),(0,n.useEffect)(()=>{(null==U?void 0:U.length)&&_()},[U,_]);let z=(0,n.useMemo)(()=>{if(!U||!R)return{totalLinks:0,totalClicks:0,activeLinks:0,topLink:null};let e=new Date,t=U.filter(t=>{let r=new Date(t.created_at);return(e.getTime()-r.getTime())/864e5<=7}).length,r=U.map(e=>({...e,clickCount:R.filter(t=>t.url_id===e.id).length})).reduce((e,t)=>t.clickCount>((null==e?void 0:e.clickCount)||0)?t:e,null);return{totalLinks:U.length,totalClicks:R.length,activeLinks:t,topLink:r}},[U,R]),W=(0,n.useMemo)(()=>U&&R?U.map(e=>({id:e.id,shortUrl:e.custom_url||e.short_url,originalUrl:e.original_url,clicks:R.filter(t=>t.url_id===e.id).length,createdAt:e.created_at})):[],[U,R]),T=(0,n.useCallback)(e=>{w(e),v(!0)},[]),M=(0,n.useCallback)(()=>{v(!1),w(null)},[]),N=(0,n.useCallback)(async e=>{try{return await E(),{shortUrl:"https://trimly.app/".concat(Math.random().toString(36).substr(2,6))}}catch(e){return{error:"Failed to create short URL"}}},[E]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.Z,{position:"sticky",elevation:0,sx:{bgcolor:"background.paper",borderBottom:1,borderColor:"divider"},children:(0,i.jsxs)(o.Z,{children:[(0,i.jsxs)(a.Z,{display:"flex",alignItems:"center",gap:1,flex:1,children:[(0,i.jsx)(m.Z,{sx:{fontSize:32,color:"primary.main"}}),(0,i.jsx)(s.Z,{variant:"h5",fontWeight:700,color:"text.primary",children:"Trimly"})]}),(0,i.jsx)(Y,{})]})}),(0,i.jsx)(c.Z,{open:S||I||!1,sx:{zIndex:e=>e.zIndex.drawer+1},children:(0,i.jsx)(d.Z,{})}),(0,i.jsxs)(h.Z,{maxWidth:"xl",sx:{py:4},children:[(0,i.jsxs)(f.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,i.jsx)(s.Z,{variant:"h3",fontWeight:700,gutterBottom:!0,children:"Dashboard"}),(0,i.jsx)(s.Z,{variant:"body1",color:"text.secondary",paragraph:!0,children:"Track and manage all your shortened URLs in one place"})]}),(0,i.jsxs)(u.ZP,{container:!0,spacing:3,sx:{mb:4},children:[(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(Suspense,{fallback:(0,i.jsx)(d.Z,{}),children:(0,i.jsx)(C,{title:"Total Links",value:z.totalLinks,icon:(0,i.jsx)(m.Z,{}),color:"#3b82f6",delay:0})})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(Suspense,{fallback:(0,i.jsx)(d.Z,{}),children:(0,i.jsx)(C,{title:"Total Clicks",value:z.totalClicks,icon:(0,i.jsx)(g.Z,{}),color:"#10b981",trend:12,delay:.1})})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(Suspense,{fallback:(0,i.jsx)(d.Z,{}),children:(0,i.jsx)(C,{title:"Active Links",value:z.activeLinks,icon:(0,i.jsx)(p.Z,{}),color:"#f59e0b",delay:.2})})}),(0,i.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(Suspense,{fallback:(0,i.jsx)(d.Z,{}),children:(0,i.jsx)(C,{title:"Top Link",value:(null===(t=z.topLink)||void 0===t?void 0:t.clickCount)||0,icon:(0,i.jsx)(y.Z,{}),color:"#8b5cf6",delay:.3})})})]}),(0,i.jsx)(a.Z,{sx:{mb:4},children:(0,i.jsx)(Suspense,{fallback:(0,i.jsx)(d.Z,{}),children:(0,i.jsx)(B,{onSubmit:N})})}),(0,i.jsx)(u.ZP,{container:!0,spacing:3,children:(0,i.jsx)(u.ZP,{item:!0,xs:12,children:(0,i.jsx)(Suspense,{fallback:(0,i.jsx)(d.Z,{}),children:(0,i.jsx)(D,{links:W,onShowQR:T,onShowStats:e=>console.log("Show stats for:",e)})})})})]}),(0,i.jsx)(x.Z,{open:r,onClose:M,maxWidth:"sm",fullWidth:!0,children:k&&(0,i.jsx)(F,{url:k.shortUrl,title:"QR Code for ".concat(k.shortUrl)})})]})}Y.displayName="ThemeToggle"},25130:function(e,t,r){"use strict";r.d(t,{ThemeProvider:function(){return u},r:function(){return h}});var i=r(57437),n=r(2265),l=r(30451),o=r(20124),a=r(94444);let s=e=>({palette:{mode:e,..."light"===e?{primary:{main:"#3b82f6",light:"#60a5fa",dark:"#2563eb",contrastText:"#ffffff"},secondary:{main:"#8b5cf6",light:"#a78bfa",dark:"#7c3aed"},background:{default:"#f8fafc",paper:"#ffffff"},text:{primary:"#1e293b",secondary:"#64748b"}}:{primary:{main:"#3b82f6",light:"#60a5fa",dark:"#2563eb",contrastText:"#ffffff"},secondary:{main:"#8b5cf6",light:"#a78bfa",dark:"#7c3aed"},background:{default:"#0f172a",paper:"#1e293b"},text:{primary:"#f1f5f9",secondary:"#cbd5e1"}}},typography:{fontFamily:'"Inter", "Roboto", "Helvetica", "Arial", sans-serif',h1:{fontSize:"2.5rem",fontWeight:700,lineHeight:1.2},h2:{fontSize:"2rem",fontWeight:600,lineHeight:1.3},h3:{fontSize:"1.75rem",fontWeight:600,lineHeight:1.3},h4:{fontSize:"1.5rem",fontWeight:600,lineHeight:1.4},h5:{fontSize:"1.25rem",fontWeight:600,lineHeight:1.5},h6:{fontSize:"1rem",fontWeight:600,lineHeight:1.5},body1:{fontSize:"1rem",lineHeight:1.6},body2:{fontSize:"0.875rem",lineHeight:1.6}},shape:{borderRadius:12},components:{MuiCard:{styleOverrides:{root:{boxShadow:"dark"===e?"0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -1px rgba(0, 0, 0, 0.2)":"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",transition:"transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out","&:hover":{transform:"translateY(-2px)",boxShadow:"dark"===e?"0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -2px rgba(0, 0, 0, 0.3)":"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"}}}},MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500,borderRadius:8}}},MuiTextField:{styleOverrides:{root:{"& .MuiOutlinedInput-root":{borderRadius:8}}}}}}),c=e=>(0,a.Z)(s(e)),d=(0,n.createContext)({mode:"dark",toggleTheme:()=>{}}),h=()=>(0,n.useContext)(d);function u(e){let{children:t}=e,[r,a]=(0,n.useState)("dark"),[s,h]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h(!0);let e=localStorage.getItem("theme-mode");e&&a(e)},[]);let u=(0,n.useMemo)(()=>c(r),[r]);return s?(0,i.jsx)(d.Provider,{value:{mode:r,toggleTheme:()=>{a(e=>{let t="light"===e?"dark":"light";return localStorage.setItem("theme-mode",t),t})}},children:(0,i.jsxs)(l.Z,{theme:u,children:[(0,i.jsx)(o.ZP,{}),t]})}):null}},12270:function(e,t,r){"use strict";r.d(t,{N3:function(){return l},Wj:function(){return o}});var i=r(64878),n=r(94430);async function l(e){let{data:t,error:r}=await n.Z.from("clicks").select("*").in("url_id",e);return r?(console.error("Error fetching clicks:",r),null):t}async function o(e){let{data:t,error:r}=await n.Z.from("clicks").select("*").eq("url_id",e);if(r)throw console.error(r),Error("Unable to load Stats");return t}new i.M},13054:function(e,t,r){"use strict";r.d(t,{B2:function(){return u},Gr:function(){return a},Um:function(){return o},uJ:function(){return h}});var i=r(94430);let n=new Map,l={get:e=>{let t=n.get(e);return t?Date.now()>t.expiry?(n.delete(e),null):t.data:null},set:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5;if(n.set(e,{data:t,expiry:Date.now()+r}),n.size>100){let e=n.keys().next().value;n.delete(e)}},invalidate:e=>{if("*"===e)n.clear();else for(let t of n.keys())t.includes(e)&&n.delete(t)}};async function o(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r="urls_".concat(e||"all");if(t){let e=l.get(r);if(e)return e}try{let e=i.Z.from("urls").select("*").order("created_at",{ascending:!1}),{data:t,error:n}=await e;if(n)throw n;let o=t||[];return l.set(r,o),o}catch(e){throw console.error("Error fetching URLs:",e),Error("Unable to load URLs")}}async function a(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r="url_".concat(e);if(t){let e=l.get(r);if(e)return e}try{let{data:t,error:n}=await i.Z.from("urls").select("*").eq("id",e).single();if(n)throw n;if(!t)throw Error("URL not found");return l.set(r,t),t}catch(e){throw console.error("Error fetching URL:",e),Error("URL not found")}}let s=(()=>{let e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",t=Date.now();return function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,i="",n=++t+Math.floor(1e6*Math.random());for(;n>0&&i.length<r;)i=e[n%62]+i,n=Math.floor(n/62);for(;i.length<r;)i=e[Math.floor(62*Math.random())]+i;return i}})(),c=e=>{if(!e)throw Error("URL is required");let t=e.trim();if(!t)throw Error("URL cannot be empty");return/^https?:\/\//i.test(t)?t:"https://".concat(t)},d=e=>{if(!e)return null;let t=e.trim().toLowerCase();if(!/^[a-z0-9_-]+$/.test(t))throw Error("Custom URL can only contain letters, numbers, hyphens, and underscores");if(t.length<3||t.length>20)throw Error("Custom URL must be between 3 and 20 characters");return t};async function h(e,t){let{title:r,longUrl:n,customUrl:o}=e;try{let e;let a=c(n),h=d(o);if(h){let{data:e}=await i.Z.from("urls").select("id").or("custom_url.eq.".concat(h,",short_url.eq.").concat(h)).maybeSingle();if(e)throw Error("Custom URL already taken. Please try another one.")}let u=0;for(;u<3;){e=s(6);let{data:t}=await i.Z.from("urls").select("id").eq("short_url",e).maybeSingle();if(!t)break;u++}if(3===u)throw Error("Failed to generate unique short URL. Please try again.");let{data:x,error:f}=await i.Z.from("urls").insert([{title:r||a,user_id:null,original_url:a,custom_url:h,short_url:e,qr_code:t||null,clicks:0}]).select().single();if(f)throw console.error("Error creating URL:",f),Error(f.message);return l.invalidate("urls_"),x}catch(e){throw console.error("Error in createUrl:",e),Error(e.message||"Error creating short URL")}}async function u(e){try{let{error:t}=await i.Z.from("urls").delete().eq("id",e);if(t)throw t;l.invalidate("*")}catch(e){throw console.error("Error deleting URL:",e),Error("Unable to delete URL")}}},94430:function(e,t,r){"use strict";var i=r(95646);let n="https://epyutufurcgskuzwiqce.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVweXV0dWZ1cmNnc2t1endpcWNlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMjAzMTAsImV4cCI6MjA3Nzc5NjMxMH0.Dmusxo1ghDmyHQk0Jf_SgEjOTfIk3OJCF0mbuK_sXcM";if(!n||!l)throw console.error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY in .env.local"),Error("Missing Supabase environment variables");let o=(0,i.eI)(n,l);t.Z=o},38327:function(e,t,r){"use strict";var i=r(2265);t.Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[r,n]=(0,i.useState)(null),[l,o]=(0,i.useState)(null),[a,s]=(0,i.useState)(null);return{data:r,loading:l,error:a,fn:async function(){for(var r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];o(!0),s(null);try{let r=await e(t,...i);n(r),s(null)}catch(e){s(e)}finally{o(!1)}}}}}},function(e){e.O(0,[126,161,772,971,23,744],function(){return e(e.s=29580)}),_N_E=e.O()}]);